"use strict";(self.webpackChunksudeeparyan_knowledgebase=self.webpackChunksudeeparyan_knowledgebase||[]).push([[2280],{85380:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var s=t(74848),a=t(28453);const i={},o=void 0,l={id:"AI360/Agents/LangGraph/Chain",title:"Chain",description:'1. In LangGraph, "Chain" refers to a sequence of tasks that are executed in a specific order to process input data and generate the desired output.',source:"@site/docs/AI360/Agents/LangGraph/Chain.md",sourceDirName:"AI360/Agents/LangGraph",slug:"/AI360/Agents/LangGraph/Chain",permalink:"/docs/AI360/Agents/LangGraph/Chain",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"AI360Sidebar",previous:{title:"Simple graph construction",permalink:"/docs/AI360/Agents/LangGraph/Simple graph construction"},next:{title:"Router",permalink:"/docs/AI360/Agents/LangGraph/Router"}},r={},c=[{value:"Messages",id:"messages",level:4},{value:"Tools",id:"tools",level:4},{value:"Experiment",id:"experiment",level:4}];function d(e){const n={code:"code",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In LangGraph, ",(0,s.jsx)(n.code,{children:'"Chain"'})," refers to a sequence of tasks that are executed in a specific order to process input data and generate the desired output."]}),"\n",(0,s.jsx)(n.li,{children:"This helps to build modular workflows where each component of the chain contributes to the final result."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"chain",src:t(48040).A+"",width:"863",height:"396"})}),"\n",(0,s.jsx)(n.h4,{id:"messages",children:"Messages"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Chat models can use messages, which capture different roles within a conversation."}),"\n",(0,s.jsx)(n.li,{children:"LangChain supports various message types, including HumanMessage, AIMessage, SystemMessage, and ToolMessage."}),"\n",(0,s.jsx)(n.li,{children:"These represent a message from the user, from chat model, for the chat model to instruct behavior, and from a tool call."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:' from pprint import pprint\n from langchain_core.messages import AIMessage, HumanMessage\n\n messages = [AIMessage(content=f"So you said you were researching ocean mammals?", name="Model")]\n messages.append(HumanMessage(content=f"Yes, that\'s right.",name="Lance"))\n messages.append(AIMessage(content=f"Great, what would you like to learn about.", name="Model"))\n messages.append(HumanMessage(content=f"I want to learn about the best place to see Orcas in the US.", name="Lance"))\n\n for m in messages:\n     m.pretty_print()\n'})}),"\n",(0,s.jsx)(n.h4,{id:"tools",children:"Tools"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Tools are used to enhance workflows by enabling specific actions such as fetching data from a database, calling an external API, or performing calculations."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Tools in LangGraph are modular, meaning they can be easily integrated into chains to perform specific tasks and it also can be reused across different chains\n",(0,s.jsx)(n.img,{alt:"tools",src:t(92554).A+"",width:"862",height:"221"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The multiply function is our tool and we bind the tool with the llm."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:' def multiply(a: int, b: int) -> int:\n     """Multiply a and b.\n\n     Args:\n         a: first int\n         b: second int\n     """\n     return a * b\n\n llm_with_tools = llm.bind_tools([multiply])\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:"Now we try to invoke the tool binded llm with the user query."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'tool_call = llm_with_tools.invoke([HumanMessage(content=f"What is 2 multiplied by 3", name="Lance")])\ntool_call.additional_kwargs[\'tool_calls\']\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsx)(n.li,{children:'This invocation provide us with result that contains information about "which function(tool) be called","what are the arguments".'}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:" `[{'id': 'call_OP4qwtGk4gTIaIySPFHkpbB2',\n'function': {'arguments': '{\"a\":2,\"b\":3}', 'name': 'multiply'},\n'type': 'function'}]`\n"})}),"\n",(0,s.jsx)(n.h4,{id:"experiment",children:"Experiment"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:['What if I intentionally change the code inside the "multiply" function from ',(0,s.jsx)(n.code,{children:'"a*b"'})," to ",(0,s.jsx)(n.code,{children:'"a+b"'}),"."]}),"\n",(0,s.jsx)(n.li,{children:'And give the query as "add two numbers 4 and 5", will LLM still pick the "multiply" tool still now?.'}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:' def multiply(a: int, b: int) -> int:\n """Multiply a and b.\n\n Args:\n     a: first int\n     b: second int\n """\n return a + b\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:'No, LLM will not pick the "multiply" tool, here are some reasons why?'}),"\n"]}),"\n",(0,s.jsxs)("table",{class:"table-size-for-cloud-services",children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Deciding Factors"}),(0,s.jsx)("th",{children:"Reason"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{class:"custom-header",children:"Tool Metadata"}),(0,s.jsx)("td",{children:(0,s.jsx)(n.p,{children:"Behind the LangGraph, it sends the metadata (function name, description) of the function in the prompt, not all the code. So, it is necessary to give the relevant function name and description."})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{class:"custom-header",children:"Natural Language Understanding"}),(0,s.jsx)("td",{children:(0,s.jsx)(n.p,{children:'The LLM processes the user\u2019s query, "add two numbers 2 and 3", and identifies that the operation requested is addition. Since your multiply tool performs multiplication (even though it\'s incorrectly coded to add in this example), the LLM understands this tool is for multiplication and will not call it for addition tasks unless it is explicitly labeled as such.'})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{class:"custom-header",children:"Intent Matching"}),(0,s.jsx)("td",{children:(0,s.jsx)(n.p,{children:"The LLM uses intent matching to decide which tool to invoke. It maps the user's request (\"add two numbers\") to the closest registered tool that performs addition. Since your tool is named or registered as a multiply tool, the LLM is unlikely to invoke it because it doesn't match the user's request."})})]})]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},48040:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/chain-07ee3a9f4d6a6f4c9e06e9938efb203c.png"},92554:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/tools-a3edf6affa7ad84a2c8e0cdba30bfa3e.png"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var s=t(96540);const a={},i=s.createContext(a);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);