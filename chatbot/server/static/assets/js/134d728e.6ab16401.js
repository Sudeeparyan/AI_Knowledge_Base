"use strict";(self.webpackChunksudeeparyan_knowledgebase=self.webpackChunksudeeparyan_knowledgebase||[]).push([[7849],{46084:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var i=t(74848),s=t(28453);const r={},o=void 0,d={id:"RAG360/Data Ingestion/Vector Database/In-Memory/Chroma-DB",title:"Chroma-DB",description:"1. Chroma DB",source:"@site/docs/RAG360/Data Ingestion/Vector Database/In-Memory/Chroma-DB.md",sourceDirName:"RAG360/Data Ingestion/Vector Database/In-Memory",slug:"/RAG360/Data Ingestion/Vector Database/In-Memory/Chroma-DB",permalink:"/docs/RAG360/Data Ingestion/Vector Database/In-Memory/Chroma-DB",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"ragSidebar",previous:{title:"FAISS",permalink:"/docs/RAG360/Data Ingestion/Vector Database/In-Memory/FAISS"},next:{title:"Self Hosted",permalink:"/docs/category/self-hosted"}},a={},c=[{value:"Limitations",id:"limitations",level:3},{value:"Metrics",id:"metrics",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.trychroma.com/",children:"Chroma DB"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/",children:"Docs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.llamaindex.ai/en/stable/examples/vector_stores/ChromaIndexDemo.html",children:"Llamaindex X Chroma"})}),"\n"]})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"ChromaDB.png",src:t(11016).A+"",width:"905",height:"484"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Chroma is an open-source embedding database."}),"\n",(0,i.jsxs)(n.li,{children:["Chroma gives the tools to:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"store embeddings and their metadata"}),"\n",(0,i.jsx)(n.li,{children:"embed documents and queries"}),"\n",(0,i.jsx)(n.li,{children:"search embeddings"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Chroma currently maintains 1st party clients for Python and Javscript.","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["##",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/reference/Client",children:"Client"})," - is the object\r\nthat wraps a connection to a backing Chroma DB"]}),"\n",(0,i.jsx)(n.li,{children:"EphemeralClient - In memory client."}),"\n",(0,i.jsx)(n.li,{children:"PersistentClient - In memory client that can persist in disk."}),"\n",(0,i.jsx)(n.li,{children:"HttpClient - as a server running on local machine or in the cloud."}),"\n",(0,i.jsx)(n.li,{children:"Client can contain multiple collections. At present only one collection\r\ncan be used to create a vector store."}),"\n",(0,i.jsxs)(n.li,{children:["Provides\r\n",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/reference/Client#create_collection",children:"CRUD functions"}),"\r\nto be performed on collections."]}),"\n",(0,i.jsxs)(n.li,{children:["##",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/reference/Collection",children:"Collection"})," - is the\r\nobject that wraps a collection"]}),"\n",(0,i.jsx)(n.li,{children:"Collections are where you'll store your embeddings, documents, and any\r\nadditional metadata."}),"\n",(0,i.jsxs)(n.li,{children:["Collections support\r\n",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/reference/Collection#add",children:"CRUD operations"})," on\r\nembeddings and documents."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/usage-guide#querying-a-collection",children:"Querying a Collection"})," -\r\nGet the n_results nearest neighbor embeddings for provided\r\nquery_embeddings or query_texts.\r\n",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/reference/Collection#query",children:"query"})," function\r\ncan run similarity search in the collection."]}),"\n",(0,i.jsx)(n.li,{children:"Filtering can be applied to query output using where and where_document\r\nwhich filter based on metadata and document text content respectively."}),"\n",(0,i.jsx)(n.li,{children:"A single ChromaVectorStore object corresponds to data of 1 Collection."}),"\n",(0,i.jsx)(n.li,{children:"Chroma has no support for Multiple Vector Store objects at present."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"chromaDBCollection.png",src:t(97812).A+"",width:"775",height:"356"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/embeddings",children:"Embeddings"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Chroma provides lightweight wrappers like ",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/embeddings/openai",children:"OpenAIEmbedding"})," around popular embedding providers, making it easy to use them"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["By default, Chroma uses the ",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/embeddings#sentence-transformers",children:"Sentence Transformers"})," all-MiniLM-L6-v2 model to create embeddings."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Chroma provides lightweight wrappers around popular embedding providers, making it easy to use them in your apps.\r\n",(0,i.jsx)(n.img,{alt:"ChromaDBEmbedding.png",src:t(63601).A+"",width:"407",height:"317"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Collections can be created with the desired embedding functions and every operation(CRUD) of that collection will use the same embedding function."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"When using .get_collection to get a collection in a Client, the embedding function must be passed as parameter."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Chroma supports creation of ",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/embeddings#custom-embedding-functions",children:"custom embedding function"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"When document texts are added to a collection the Chroma collection will automatically generate embeddings for the text using the provided embedding function, if not the default sentence transformer embedding function."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Embeddings may also be generated early and then added to collection with corresponding texts/docs and metadata and ids."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Chroma's functionalities revolve around the ",(0,i.jsx)(n.code,{children:"__*ids*__"})," attribute of the collection that holds the list of ids of the embeddings. When texts/documents are added/deleted/updated to a collection with/without embeddings ",(0,i.jsx)(n.code,{children:"__*ids*__"})," are required parameter."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["TLDR - ",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/api-reference",children:"API cheatsheet"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"limitations",children:"Limitations"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["There is a cap in the number of embeddings that can be processed at a time\r\nbased on the machine that chroma is running on. It can be accessed by\r\n",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"chroma_client.max_batch_size"})}),", where ",(0,i.jsx)(n.strong,{children:"chroma_client"})," is an instance of\r\nChroma Client class. The value cannot be changed manually. The value is\r\nautomatically generated based on system capabilities."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Need to make sure same embedding functions are used while doing CRUD\r\noperations."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Using Chroma Vector Store with\r\n",(0,i.jsx)(n.a,{href:"/Astro/ETL-Pipeline/Ingestion-Pipeline-in-Llama%2DIndex",children:"Ingestion Pipeline of LlamaIndex"}),"\r\nposes uncertainty in how embeddings are added and how existing embeddings are\r\nupdated in the vector store."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["While Chroma Collections are able to use\r\n",(0,i.jsx)(n.a,{href:"https://docs.trychroma.com/reference/Collection#upsert",children:"upsert"})," function to\r\nupdate existing embeddings and insert new embeddings with the help of ids,\r\nthe same was not possible while using vector store within Ingestion Pipeline."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"There were fluctuations in how embeddings were created. There were new\r\nduplicate embeddings created in few pipeline runs."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"metrics",children:"Metrics"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Client"}),(0,i.jsx)(n.th,{children:"Throughput"}),(0,i.jsx)(n.th,{children:"Latency"}),(0,i.jsx)(n.th,{children:"Memory Usage"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Persistent Client"}),(0,i.jsx)(n.td,{children:"90 - 100 queries"}),(0,i.jsx)(n.td,{children:"3.66 s \xb1 180 ms"}),(0,i.jsx)(n.td,{children:"213-214 MiB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Http Client"}),(0,i.jsx)(n.td,{children:"90 - 100 queries"}),(0,i.jsx)(n.td,{children:"3.77 s \xb1 176 ms"}),(0,i.jsx)(n.td,{children:"244-245 MiB"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11016:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ChromaDB-1398357af4fde9ce5bbb543b0b7049ae.png"},63601:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/ChromaDBEmbedding-08d864fe163b1971aaa4bdc9427994cc.png"},97812:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/chromaDBCollection-96371cfa599d01ad8f2aae77a4f23434.png"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var i=t(96540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);