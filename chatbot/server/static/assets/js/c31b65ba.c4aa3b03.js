"use strict";(self.webpackChunksudeeparyan_knowledgebase=self.webpackChunksudeeparyan_knowledgebase||[]).push([[5928],{22516:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>c});var r=s(74848),i=s(28453);const t={},l=void 0,d={id:"Azure360/Azure Best Practices/Azure Security/Networking/Virtual Network",title:"Virtual Network",description:"Azure Virtual Network (VNet) is the fundamental block for private networking in",source:"@site/docs/Azure360/Azure Best Practices/Azure Security/Networking/Virtual Network.md",sourceDirName:"Azure360/Azure Best Practices/Azure Security/Networking",slug:"/Azure360/Azure Best Practices/Azure Security/Networking/Virtual Network",permalink:"/docs/Azure360/Azure Best Practices/Azure Security/Networking/Virtual Network",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"azureSidebar",previous:{title:"Networking",permalink:"/docs/category/networking"},next:{title:"Security Groups",permalink:"/docs/category/security-groups"}},a={},c=[{value:"IP Addressing \ud83d\udce1",id:"ip-addressing-",level:3},{value:"Region Selection \ud83c\udf10",id:"region-selection-",level:3},{value:"Subnet",id:"subnet",level:2},{value:"What is a Subnet?",id:"what-is-a-subnet",level:3},{value:"How Subnet Works",id:"how-subnet-works",level:3},{value:"When to Use a Subnet",id:"when-to-use-a-subnet",level:3},{value:"How to Use Subnets",id:"how-to-use-subnets",level:3},{value:"Address space &amp; Subnet sizing",id:"address-space--subnet-sizing",level:2},{value:"Address Space Management",id:"address-space-management",level:3},{value:"Recommendation",id:"recommendation",level:3},{value:"Azure Resources and Private IP Requirements",id:"azure-resources-and-private-ip-requirements",level:2},{value:"Example Scenerio",id:"example-scenerio",level:3},{value:"Subnet Sizing",id:"subnet-sizing",level:4},{value:"Example Subnet Sizes",id:"example-subnet-sizes",level:4}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Azure Virtual Network (VNet) is the fundamental block for private networking in\r\nAzure. It enables you to create a logically isolated network in the Azure cloud\r\nto securely connect and manage Azure resources."}),"\n",(0,r.jsx)(n.h3,{id:"ip-addressing-",children:"IP Addressing \ud83d\udce1"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Plan IP address spaces carefully, avoiding overlap with on-premises networks\r\nor other VNets."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use\r\n",(0,r.jsx)(n.a,{href:"https://www.digitalocean.com/community/tutorials/understanding-ip-addresses-subnets-and-cidr-notation-for-networking",children:"CIDR notation"}),"\r\nand ensure adequate IP ranges for future growth."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"region-selection-",children:"Region Selection \ud83c\udf10"}),"\n",(0,r.jsx)(n.p,{children:"Ensure VNets are region-specific, avoiding cross-region dependencies to reduce\r\nlatency and increase reliability."}),"\n",(0,r.jsx)(n.h2,{id:"subnet",children:"Subnet"}),"\n",(0,r.jsx)(n.h3,{id:"what-is-a-subnet",children:"What is a Subnet?"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:['A subnet (short for "subnetwork") is a smaller, segmented portion of a larger\r\nnetwork, such as a\r\n',(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview",children:"Virtual Network (VNet)"}),"\r\nin Azure."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Subnets help to organize and isolate resources within a network, allowing for\r\nmore granular control over network traffic, security and management."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"how-subnet-works",children:"How Subnet Works"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["When you create a VNet, you define a range of IP addresses using\r\n",(0,r.jsx)(n.a,{href:"https://devblogs.microsoft.com/premier-developer/understanding-cidr-notation-when-designing-azure-virtual-networks-and-subnets/",children:"CIDR (Classless Inter-Domain Routing)"}),"\r\nnotation."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"You can then create multiple subnets within that VNet, each with its own\r\nsubset of the VNet's IP address range."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Resources, such as virtual machines, can be placed in different subnets,\r\nallowing you to manage and secure them independently."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-a-subnet",children:"When to Use a Subnet"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Subnets are used to divide a VNet into multiple, smaller networks, each with\r\nits own IP address range."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Resources within different subnets can be isolated from each other, depending\r\non security and access requirements."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use subnets to logically group resources based on their function, role, or\r\naccess needs (e.g., web servers, application servers, database servers)."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)("span",{class:"custom-header",children:(0,r.jsx)(n.strong,{children:"Example:"})})," You might place web\r\nservers in one subnet, application servers in another and databases in a\r\nthird, each with different security and routing rules."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use subnets to apply different security controls to different parts of your\r\nnetwork."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)("span",{class:"custom-header",children:(0,r.jsx)(n.strong,{children:"Example:"})})," Place sensitive or\r\ncritical resources in a subnet with stricter security controls."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use Network Security Groups (NSGs) to control inbound and outbound traffic\r\nfor each subnet."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)("span",{class:"custom-header",children:(0,r.jsx)(n.strong,{children:"Example:"})})," Restrict internet access\r\nto only a web-facing subnet while keeping backend databases in a more\r\nsecure, isolated subnet."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"how-to-use-subnets",children:"How to Use Subnets"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Azure subnet configuration documentation:\r\n",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-manage-subnet?tabs=azure-portal",children:"Learn More"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Virtual Network:\r\n",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview",children:"Learn More"})]}),"\n"]}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"address-space--subnet-sizing",children:"Address space & Subnet sizing"}),"\n",(0,r.jsx)(n.p,{children:"Below are the best practices when it comes to subnet sizing and address space allocation for Azure Virtual Networks."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)("span",{class:"custom-header",children:"Assess Requirements "}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Determine Resource Needs:"})," Evaluate the number of resources planned to deploy and their networking requirements."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Consider Future Growth:"})," Factor in potential future expansion to avoid frequent reconfiguration."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)("span",{class:"custom-header",children:"Subnet Sizing "}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Avoid Over-provisioning:"})," Allocate only as many IP addresses as needed. Using large subnets (e.g., /24) for a few resources can lead to wasted IP space."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Typical Subnet Sizes"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"/25: 128 IP addresses"})," (5 reserved by Azure, 123 usable). Suitable for larger subnets where you need more IP addresses space"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"/26: 64 IP addresses"})," (5 reserved by Azure, 59 usable). Suitable for smaller subnets where you need a limited number of IP addresses"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"/27: 32 IP addresses"})," (5 reserved by Azure, 27 usable). Suitable for small deployments."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"/28: 16 IP addresses"})," (5 reserved by Azure, 11 usable). Ideal for very small deployments or dedicated services."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Subnet Scope:"}),"\r\nUse smaller subnets for isolated or specialized environments and larger subnets where you expect higher density."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"address-space-management",children:"Address Space Management"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"CIDR Block Allocation:"})," Choose an address space large enough to accommodate current and future subnets but avoid excessive reservation. For instance, a ",(0,r.jsx)(n.code,{children:"/16"})," block provides ",(0,r.jsx)(n.code,{children:"65,536"})," addresses, which might be excessive for a small number of subnets."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Avoid Fragmentation:"})," Plan address spaces to minimize fragmentation and maintain efficient IP management."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"recommendation",children:"Recommendation"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Small Project:"})," For a project with fewer than ",(0,r.jsx)(n.code,{children:"10 resources"}),", consider using ",(0,r.jsx)(n.code,{children:"/26"})," or ",(0,r.jsx)(n.code,{children:"/27"})," subnet address space."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Medium Project:"})," For ",(0,r.jsx)(n.code,{children:"20-50 resources"}),", using multiple ",(0,r.jsx)(n.code,{children:"/26"})," or ",(0,r.jsx)(n.code,{children:"/25"})," subnet address space might be appropriate."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Large Project:"})," For larger deployments, plan subnet & address space sizes based on specific needs and future scalability."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"azure-resources-and-private-ip-requirements",children:"Azure Resources and Private IP Requirements"}),"\n",(0,r.jsxs)("table",{class:"combine-table",children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:(0,r.jsx)("span",{class:"custom-header",children:"Azure Resource"})}),(0,r.jsx)("th",{children:"IP Count"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("span",{class:"custom-header",children:"App service "})}),(0,r.jsx)("td",{children:(0,r.jsx)(n.p,{children:"1 for private endpoint"})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("span",{class:"custom-header",children:"Storage Account "})}),(0,r.jsxs)("td",{children:[(0,r.jsx)(n.p,{children:"1 for Blob private endpoint"}),(0,r.jsx)(n.p,{children:"1 for Queue private endpoint"}),(0,r.jsx)(n.p,{children:"1 for Table private endpoint"}),(0,r.jsx)(n.p,{children:"1 for File private endpoint"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Total"})," \u2013 4 Private IP\u2019s required"]})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("span",{class:"custom-header",children:"Virtual Machine "})}),(0,r.jsx)("td",{children:(0,r.jsx)(n.p,{children:"1 for private endpoint or 1 for public IP (optional)"})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("span",{class:"custom-header",children:"Open AI Services"})}),(0,r.jsx)("td",{children:(0,r.jsx)(n.p,{children:"1 for private endpoint"})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[(0,r.jsx)("span",{class:"custom-header",children:"Application gateway"})," "]}),(0,r.jsx)("td",{children:(0,r.jsx)(n.p,{children:"1 for public IP or 1 for private IP (In both cases the application gateway requires dedicated subnet)"})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("span",{class:"custom-header",children:"Virtual network Subnet"})}),(0,r.jsxs)("td",{children:[(0,r.jsx)(n.p,{children:"Azure reserves the first four and last IP addresses in each subnet for internal use."}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Total Usable IP"})," = Subnet Range - 5"]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example-scenerio",children:"Example Scenerio"}),"\n",(0,r.jsxs)(n.p,{children:["Let's assume in a project you are using ",(0,r.jsx)(n.code,{children:"4 app services"}),", ",(0,r.jsx)(n.code,{children:"1 storage account"}),", ",(0,r.jsx)(n.code,{children:"1 virtual machine"})," & all resources are connected to a Virtual Network over a private endpoint. The number of IP addresses required will be"]}),"\n",(0,r.jsxs)("table",{class:"table-size-for-cloud-services",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Azure Resource"}),(0,r.jsx)("th",{children:"IP Count Description"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("span",{class:"custom-header",children:"App Service"})}),(0,r.jsx)("td",{children:"1 private IP * 4 = 4 IP's"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("span",{class:"custom-header",children:"Storage Account"})}),(0,r.jsxs)("td",{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"4 private IPs"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Blob private endpoint: 1"}),"\n",(0,r.jsx)(n.li,{children:"Queue private endpoint: 1"}),"\n",(0,r.jsx)(n.li,{children:"Table private endpoint: 1"}),"\n",(0,r.jsx)(n.li,{children:"File private endpoint: 1"}),"\n"]})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("span",{class:"custom-header",children:"Virtual Machine"})}),(0,r.jsx)("td",{children:"1 private IP"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Total Private IPs Needed:"})," 9 private IP addresses."]}),"\n",(0,r.jsx)(n.h4,{id:"subnet-sizing",children:"Subnet Sizing"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Azure reserves the first four and last IP addresses in each subnet for internal use."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Therefore, the number of usable IP addresses in a subnet is the ",(0,r.jsx)(n.code,{children:"total IP addresses minus 5"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"example-subnet-sizes",children:"Example Subnet Sizes"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)("span",{class:"custom-header",children:"/28 (16 total IPs, 11 usable)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Total IP addresses: ",(0,r.jsx)(n.code,{children:"16"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Usable IP addresses: ",(0,r.jsx)(n.code,{children:"11"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Summary: Sufficient for this scenario (8 IPs needed)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)("span",{class:"custom-header",children:"/27 (32 total IPs, 27 usable)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Total IP addresses: ",(0,r.jsx)(n.code,{children:"32"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Usable IP addresses: ",(0,r.jsx)(n.code,{children:"27"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Summary: Provides additional IPs for future growth."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["You may want to leave some room for future expansion or additional resources, so a ",(0,r.jsx)(n.code,{children:"/27 subnet"})," might be a safer choice for flexibility."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(96540);const i={},t=r.createContext(i);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);