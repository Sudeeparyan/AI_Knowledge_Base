"use strict";(self.webpackChunksudeeparyan_knowledgebase=self.webpackChunksudeeparyan_knowledgebase||[]).push([[2745],{87716:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var s=t(74848),r=t(28453);const i={},o=void 0,a={id:"RAG360/Retrieval/Unstructured/Contextual Compressors",title:"Contextual Compressors",description:"Contextual Compressors & Filters | LangChain",source:"@site/docs/RAG360/Retrieval/Unstructured/Contextual Compressors.md",sourceDirName:"RAG360/Retrieval/Unstructured",slug:"/RAG360/Retrieval/Unstructured/Contextual Compressors",permalink:"/docs/RAG360/Retrieval/Unstructured/Contextual Compressors",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"ragSidebar",previous:{title:"Reciprocal Reranking",permalink:"/docs/RAG360/Retrieval/Unstructured/Reranking/Logical Reranking/Reciprocal Reranking"},next:{title:"Context Enrichment",permalink:"/docs/RAG360/Retrieval/Unstructured/Context Enrichment"}},l={},c=[{value:"Contextual Compressors &amp; Filters | LangChain",id:"contextual-compressors--filters--langchain",level:4},{value:"Simple RAG System",id:"simple-rag-system",level:3},{value:"Problems with the above System",id:"problems-with-the-above-system",level:3},{value:"Solution",id:"solution",level:3},{value:"Samples",id:"samples",level:3},{value:"Advantages",id:"advantages",level:3},{value:"Disadvantages",id:"disadvantages",level:3},{value:"Source Links",id:"source-links",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h4,{id:"contextual-compressors--filters--langchain",children:"Contextual Compressors & Filters | LangChain"}),"\n",(0,s.jsx)(n.h3,{id:"simple-rag-system",children:"Simple RAG System"}),"\n",(0,s.jsxs)(n.p,{children:["Let us assume the high level flow of RAG system.\r\n",(0,s.jsx)(n.img,{alt:"image.png",src:t(39118).A+"",width:"683",height:"205"})]}),"\n",(0,s.jsx)(n.p,{children:"Here,"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"The User Question is embedded and the system searches does a similarity\r\nsearch in the Vector Store."}),"\n",(0,s.jsx)(n.li,{children:"This returns a set of relevant documents for a given K size"}),"\n",(0,s.jsx)(n.li,{children:"Now these relevant documents are passed in the prompt of the LLM to get a\r\nsummarized answer with reset to the given query."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"problems-with-the-above-system",children:"Problems with the above System"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"There are chances that the set of K relevant nodes may contain some\r\nirrelevant information or a node may itself be irrelevant to the user\r\nquestion. This irrelevant information may confuse/distract the LLM during\r\nsummarization."}),"\n",(0,s.jsx)(n.li,{children:"It also takes up the prompt space."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"solution",children:"Solution"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["As a solution to the above mentioned problems, The RAG system can be modified\r\nin such a way, ",(0,s.jsx)(n.img,{alt:"image.png",src:t(10917).A+"",width:"682",height:"183"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Here, 1. In the above mentioned system, A simple Postprocessing of the\r\nretrieved documents will happen. 2. This will extract only the relevant\r\ncontent from the retrieved documents. If the retrieved document does not\r\ncontain any relevant information w.r.t user question then that document will\r\nbe skipped. 3. Only the extracted content from the relevant documents will be\r\nsent to the LLM for summarizing the answer."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"samples",children:"Samples"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"vector_store.as_retreiever()"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image.png",src:t(97852).A+"",width:"1538",height:"479"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"ContextualCompressionRetriever()"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image.png",src:t(81459).A+"",width:"1538",height:"480"})}),"\n",(0,s.jsx)(n.h3,{id:"advantages",children:"Advantages"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Is designed to improve answers from vector store searches by better taking\r\nquery context into account"}),"\n",(0,s.jsx)(n.li,{children:"Reduces distraction for subsequent chains parsing retrieved documents"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"disadvantages",children:"Disadvantages"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Each extracted relevant document will undergo a separate LLM call to extract\r\nthe relevant information from the retrieve document. This is a slow and\r\ncostly process. As a solution to this they are also supporting some Embedding\r\nFilters which will retrieve only the docs with a certain score by setting the\r\n",(0,s.jsx)(n.code,{children:"similarity_threshold"})," value."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"source-links",children:"Source Links"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Learn more about\r\n",(0,s.jsx)(n.a,{href:"https://js.langchain.com/docs/modules/data_connection/retrievers/how_to/contextual_compression",children:"LangChain Docuentation"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Learn more about\r\n",(0,s.jsx)(n.a,{href:"https://blog.langchain.dev/improving-document-retrieval-with-contextual-compression/",children:"LangChain Blog"})]}),"\n"]}),"\n"]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},39118:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/contextual1-a8821b9bb49ee8f6ba6330839ed8799d.png"},10917:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/contextual2-6cdd401a8ad65fcb43861907557724c4.png"},97852:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/contextual3-28e03b39f6c394716f92a531aabdda38.png"},81459:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/contextual4-5c5c4d05fb25c159243319ed263efaba.png"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);