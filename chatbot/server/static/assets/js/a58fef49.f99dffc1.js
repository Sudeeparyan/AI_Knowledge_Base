"use strict";(self.webpackChunksudeeparyan_knowledgebase=self.webpackChunksudeeparyan_knowledgebase||[]).push([[7899],{13775:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var o=t(74848),i=t(28453);const s={},r=void 0,a={id:"CodingStandards/Python/DependencyManagement",title:"DependencyManagement",description:"---",source:"@site/docs/CodingStandards/Python/DependencyManagement.md",sourceDirName:"CodingStandards/Python",slug:"/CodingStandards/Python/DependencyManagement",permalink:"/docs/CodingStandards/Python/DependencyManagement",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"codingStandardsSidebar",previous:{title:"Python",permalink:"/docs/category/python"},next:{title:"PythonCodingStandards",permalink:"/docs/CodingStandards/Python/PythonCodingStandards"}},l={},c=[{value:"1. Purpose",id:"1-purpose",level:2},{value:"2. Best Practices",id:"2-best-practices",level:2},{value:"Use a Virtual Environment",id:"use-a-virtual-environment",level:3},{value:"Pin Your Dependencies",id:"pin-your-dependencies",level:3},{value:"Keep Your Requirements File Up-to-Date",id:"keep-your-requirements-file-up-to-date",level:3},{value:"Avoid Global Installations of Packages",id:"avoid-global-installations-of-packages",level:3},{value:"Don\u2019t Commit Your Virtual Environment Files to Version Control",id:"dont-commit-your-virtual-environment-files-to-version-control",level:3},{value:"Make Sure You Have the Latest Versions of All Your Dependencies",id:"make-sure-you-have-the-latest-versions-of-all-your-dependencies",level:3},{value:"3. Dependency Management Tool",id:"3-dependency-management-tool",level:2},{value:"Package Installation",id:"package-installation",level:3},{value:"Dependency Resolution",id:"dependency-resolution",level:3},{value:"Version Management",id:"version-management",level:3},{value:"Environment Isolation",id:"environment-isolation",level:3},{value:"Reproducibility",id:"reproducibility",level:3},{value:"4. How Poetry Helps",id:"4-how-poetry-helps",level:2},{value:"Virtual Environment",id:"virtual-environment",level:3},{value:"Dependency Pinning",id:"dependency-pinning",level:3},{value:"Keeping Dependencies Up-to-Date",id:"keeping-dependencies-up-to-date",level:3},{value:"Avoiding Global Installations",id:"avoiding-global-installations",level:3},{value:"Version Control",id:"version-control",level:3},{value:"Latest Versions of Dependencies",id:"latest-versions-of-dependencies",level:3},{value:"5. Using Poetry",id:"5-using-poetry",level:2},{value:"Setup Poetry",id:"setup-poetry",level:3},{value:"Creating a New Poetry Project",id:"creating-a-new-poetry-project",level:3},{value:"Porting an Existing Project to Poetry",id:"porting-an-existing-project-to-poetry",level:3},{value:"Creating <code>requirements.txt</code>",id:"creating-requirementstxt",level:3},{value:"6. References",id:"6-references",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h1,{id:"best-practices-for-dependency-management",children:"Best Practices for Dependency Management"}),"\n",(0,o.jsx)(n.h2,{id:"1-purpose",children:"1. Purpose"}),"\n",(0,o.jsx)(n.p,{children:"The purpose of this document is to provide a set of best practices for managing dependencies in Python projects. Dependencies are external packages or modules that your project relies on to function properly. Managing dependencies involves installing, updating, and removing them as needed, as well as ensuring that they are compatible with your project and each other."}),"\n",(0,o.jsx)(n.p,{children:"Managing dependencies is an essential part of developing and maintaining Python projects, as it can affect the quality, performance, security, and reproducibility of your code. However, managing dependencies can also be challenging, as there are many factors to consider, such as the source, version, and location of the dependencies, the environment in which they are installed, and the tools that are used to manage them."}),"\n",(0,o.jsx)(n.p,{children:"By following this document, you will be able to manage your dependencies more effectively and efficiently, and ensure that your Python projects are robust, reliable, and easy to share with others."}),"\n",(0,o.jsx)(n.h2,{id:"2-best-practices",children:"2. Best Practices"}),"\n",(0,o.jsx)(n.p,{children:"Here are some best practices to follow when managing dependencies in Python:"}),"\n",(0,o.jsx)(n.h3,{id:"use-a-virtual-environment",children:"Use a Virtual Environment"}),"\n",(0,o.jsx)(n.p,{children:"A virtual environment is an isolated environment where you can install packages without affecting the system-wide installation of Python. This allows you to have different versions of packages for different projects, without conflicts. You can use tools like venv or poetry to create and manage virtual environments."}),"\n",(0,o.jsx)(n.h3,{id:"pin-your-dependencies",children:"Pin Your Dependencies"}),"\n",(0,o.jsxs)(n.p,{children:["It is important to specify the exact version of the packages that your project depends on. This ensures that your project will continue to work even if a new version of a dependency is released that introduces breaking changes. You can use a ",(0,o.jsx)(n.code,{children:"requirements.txt"})," file to specify the exact versions of the packages that your project depends on."]}),"\n",(0,o.jsx)(n.h3,{id:"keep-your-requirements-file-up-to-date",children:"Keep Your Requirements File Up-to-Date"}),"\n",(0,o.jsxs)(n.p,{children:["Make sure to update your ",(0,o.jsx)(n.code,{children:"requirements.txt"})," file whenever you add, remove, or update a dependency. This ensures that others can easily install the correct versions of the dependencies when they work on your project."]}),"\n",(0,o.jsx)(n.h3,{id:"avoid-global-installations-of-packages",children:"Avoid Global Installations of Packages"}),"\n",(0,o.jsx)(n.p,{children:"Avoid installing packages globally, as this can lead to conflicts between different projects that depend on different versions of the same package. Instead, always install packages within a virtual environment."}),"\n",(0,o.jsx)(n.h3,{id:"dont-commit-your-virtual-environment-files-to-version-control",children:"Don\u2019t Commit Your Virtual Environment Files to Version Control"}),"\n",(0,o.jsxs)(n.p,{children:["Your virtual environment files should not be committed to version control, as they can be large and are specific to your local setup. Instead, only commit your ",(0,o.jsx)(n.code,{children:"requirements.txt"})," file, which specifies the dependencies that others need to install."]}),"\n",(0,o.jsx)(n.h3,{id:"make-sure-you-have-the-latest-versions-of-all-your-dependencies",children:"Make Sure You Have the Latest Versions of All Your Dependencies"}),"\n",(0,o.jsx)(n.p,{children:"Regularly check for updates to your dependencies and update them as needed. This ensures that you have the latest features and bug fixes. By following these best practices, you can effectively manage dependencies in your Python projects and ensure that your projects are stable and easy to work with."}),"\n",(0,o.jsx)(n.h2,{id:"3-dependency-management-tool",children:"3. Dependency Management Tool"}),"\n",(0,o.jsx)(n.p,{children:"A dependency management tool in Python is a tool that simplifies the process of managing the external libraries and packages that your project depends on. These tools help you keep track of which packages your project uses, as well as their versions, and ensure that the correct versions are installed in the correct environments."}),"\n",(0,o.jsx)(n.p,{children:"Here are some key features of dependency management tools:"}),"\n",(0,o.jsx)(n.h3,{id:"package-installation",children:"Package Installation"}),"\n",(0,o.jsx)(n.p,{children:"These tools allow you to easily install new packages into your project's environment. This includes downloading the package from a package repository (like PyPI), installing it, and making it available for import in your Python code."}),"\n",(0,o.jsx)(n.h3,{id:"dependency-resolution",children:"Dependency Resolution"}),"\n",(0,o.jsx)(n.p,{children:"When you install a package, it may depend on other packages. Dependency management tools automatically resolve these dependencies and install all necessary packages."}),"\n",(0,o.jsx)(n.h3,{id:"version-management",children:"Version Management"}),"\n",(0,o.jsx)(n.p,{children:"Over time, new versions of packages are released. Dependency management tools help you manage these versions, ensuring that you're using a version that works with your code and updating packages when necessary."}),"\n",(0,o.jsx)(n.h3,{id:"environment-isolation",children:"Environment Isolation"}),"\n",(0,o.jsx)(n.p,{children:"These tools often provide ways to isolate your project's environment from others. This means that the packages installed for one project won't interfere with those installed for another."}),"\n",(0,o.jsx)(n.h3,{id:"reproducibility",children:"Reproducibility"}),"\n",(0,o.jsx)(n.p,{children:"By keeping track of the exact versions of the packages used in a project, dependency management tools make it easy to reproduce the project's environment on a different machine."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," Poetry is the recommended dependency management tool for Python. The following section will discuss Poetry and how to use it in your projects."]}),"\n",(0,o.jsx)(n.h2,{id:"4-how-poetry-helps",children:"4. How Poetry Helps"}),"\n",(0,o.jsx)(n.p,{children:"Dependency management tools like Poetry are essential for maintaining best practices in Python development for several reasons:"}),"\n",(0,o.jsx)(n.h3,{id:"virtual-environment",children:"Virtual Environment"}),"\n",(0,o.jsx)(n.p,{children:"Poetry automatically creates a virtual environment for your project. This isolates your project and its dependencies from the global Python environment, preventing conflicts between different versions of packages used in other projects."}),"\n",(0,o.jsx)(n.h3,{id:"dependency-pinning",children:"Dependency Pinning"}),"\n",(0,o.jsxs)(n.p,{children:["Poetry uses a ",(0,o.jsx)(n.code,{children:"pyproject.toml"})," file to keep track of your project's dependencies. This file serves a similar purpose to ",(0,o.jsx)(n.code,{children:"requirements.txt"}),", but it's more powerful because it also includes metadata about your project and its dependencies."]}),"\n",(0,o.jsxs)(n.p,{children:["In addition to the ",(0,o.jsx)(n.code,{children:"pyproject.toml"})," file, Poetry also generates a ",(0,o.jsx)(n.code,{children:"poetry.lock"})," file. This lock file is crucial for maintaining consistent environments. It pins each dependency (and sub-dependency) to a specific version, ensuring that every install results in the exact same environment. The ",(0,o.jsx)(n.code,{children:"poetry.lock"})," file should be committed to version control, allowing anyone who works on the project to have the same exact dependencies."]}),"\n",(0,o.jsx)(n.h3,{id:"keeping-dependencies-up-to-date",children:"Keeping Dependencies Up-to-Date"}),"\n",(0,o.jsxs)(n.p,{children:["Poetry takes care of updating the ",(0,o.jsx)(n.code,{children:"pyproject.toml"})," file whenever a package is installed or removed using ",(0,o.jsx)(n.code,{children:"poetry add <package>"})," and ",(0,o.jsx)(n.code,{children:"poetry remove <package>"})," commands respectively. This avoids the need for manually updating your dependencies regularly."]}),"\n",(0,o.jsx)(n.h3,{id:"avoiding-global-installations",children:"Avoiding Global Installations"}),"\n",(0,o.jsx)(n.p,{children:"Since Poetry automatically creates a virtual environment for each project, there's no need to install packages globally. This helps to avoid conflicts between different versions of the same package used in different projects."}),"\n",(0,o.jsx)(n.h3,{id:"version-control",children:"Version Control"}),"\n",(0,o.jsxs)(n.p,{children:["Poetry generates a ",(0,o.jsx)(n.code,{children:"poetry.lock"})," file, which you should commit to version control. This file ensures that everyone working on the project uses the same versions of the dependencies. However, the virtual environment itself (which includes the installed packages) should not be committed to version control."]}),"\n",(0,o.jsx)(n.h3,{id:"latest-versions-of-dependencies",children:"Latest Versions of Dependencies"}),"\n",(0,o.jsxs)(n.p,{children:["Poetry makes it easy to stay up-to-date with the latest versions of your dependencies. You can use the ",(0,o.jsx)(n.code,{children:"poetry show --outdated"})," command to see which packages have newer versions available. You can easily update all your dependencies to their latest versions by running ",(0,o.jsx)(n.code,{children:"poetry update"}),". If you want to update a single package using Poetry, you can use the ",(0,o.jsx)(n.code,{children:"poetry update <package>"})," command."]}),"\n",(0,o.jsxs)(n.p,{children:["These commands will also update the ",(0,o.jsx)(n.code,{children:"pyproject.toml"})," and ",(0,o.jsx)(n.code,{children:"poetry.lock"})," files accordingly."]}),"\n",(0,o.jsx)(n.h2,{id:"5-using-poetry",children:"5. Using Poetry"}),"\n",(0,o.jsx)(n.h3,{id:"setup-poetry",children:"Setup Poetry"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Open PowerShell and run the below command:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | py -\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Copy the path mentioned in the PowerShell."}),"\n",(0,o.jsxs)(n.li,{children:["Add the path to the environment variable.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Open the ",(0,o.jsx)(n.strong,{children:"System Properties"})," dialog. You can do this by right-clicking on ",(0,o.jsx)(n.strong,{children:"Computer"})," on the desktop or in the Start menu, choosing ",(0,o.jsx)(n.em,{children:"Properties"}),", then clicking on ",(0,o.jsx)(n.strong,{children:"Advanced system settings."})]}),"\n",(0,o.jsxs)(n.li,{children:["In the System Properties dialog, click on the ",(0,o.jsx)(n.strong,{children:"Environment Variables"})," button. This will open the Environment Variables dialog."]}),"\n",(0,o.jsxs)(n.li,{children:["In the Environment Variables dialog, navigate to the ",(0,o.jsx)(n.strong,{children:"System variables"})," section and double-click the ",(0,o.jsx)(n.strong,{children:"Path"})," variable."]}),"\n",(0,o.jsxs)(n.li,{children:["Click ",(0,o.jsx)(n.strong,{children:"New"})," and add the copied path, then click ",(0,o.jsx)(n.strong,{children:"OK."})]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:"Open a new command prompt and type the below command to check if the Poetry command is recognized:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"poetry --version\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Once it is working, it is recommended to configure virtual environment creation directory to your project folder. This can be done by executing the below command:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"poetry config virtualenvs.in-project true\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," This is a one-time configuration and need not be repeated for every project."]}),"\n",(0,o.jsx)(n.h3,{id:"creating-a-new-poetry-project",children:"Creating a New Poetry Project"}),"\n",(0,o.jsxs)(n.p,{children:["Creating a new project with Poetry is straightforward. You can use the ",(0,o.jsx)(n.code,{children:"new"})," command followed by the name of your project:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"poetry new my_project --src\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," Remember to replace ",(0,o.jsx)(n.code,{children:"my_project"})," with the actual name of your project when you\u2019re setting it up. This command will create a new directory named ",(0,o.jsx)(n.code,{children:"my_project"})," in your current directory. Inside this directory, Poetry will generate a basic project structure:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-plaintext",children:"my_project\n \u2523 pyproject.toml\n \u2523 README.md\n \u2523 src\n \u2503 \u2517 my_project\n \u2503 \u2503 \u2523 __init__.py\n \u2523 tests\n \u2503 \u2523 __init__.py\n"})}),"\n",(0,o.jsx)(n.p,{children:"Here\u2019s what each part of this structure means:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"pyproject.toml"}),": This is the main configuration file for your project, where you\u2019ll specify your project\u2019s dependencies."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"README.md"}),": This is a markdown file where you can provide documentation for your project."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"src/"}),": This directory is an additional layer of nesting for your source code. It\u2019s considered good practice as it avoids certain types of import issues."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"src/my_project/"}),": This directory is where your project\u2019s source code goes. The ",(0,o.jsx)(n.code,{children:"__init__.py"})," file is used to indicate that this directory should be treated as a Python package."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"tests/"}),": This directory is where you\u2019ll put tests for your project."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"porting-an-existing-project-to-poetry",children:"Porting an Existing Project to Poetry"}),"\n",(0,o.jsxs)(n.p,{children:["In existing projects, Poetry commands cannot be used for dependency management unless there is a ",(0,o.jsx)(n.code,{children:"pyproject.toml"})," file with required sections (",(0,o.jsx)(n.code,{children:"[tool.poetry]"})," and ",(0,o.jsx)(n.code,{children:"[tool.poetry.dependencies]"}),"). This can be easily generated by running the following command:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"\n\npoetry init\n"})}),"\n",(0,o.jsx)(n.p,{children:"The above command will prompt you with a series of questions about your project. All the fields are optional, so feel free to skip anything by pressing Enter if you don\u2019t know what to provide."}),"\n",(0,o.jsx)(n.p,{children:"Run the following command to add new packages to your project:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"poetry add <package-name>\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," This will create a new virtual environment automatically in the project's root folder under the name ",(0,o.jsx)(n.code,{children:".venv"}),". If the existing project also has a ",(0,o.jsx)(n.code,{children:".venv"})," folder in the root folder, delete it and run the above command."]}),"\n",(0,o.jsxs)(n.h3,{id:"creating-requirementstxt",children:["Creating ",(0,o.jsx)(n.code,{children:"requirements.txt"})]}),"\n",(0,o.jsxs)(n.p,{children:["Sometimes a ",(0,o.jsx)(n.code,{children:"requirements.txt"})," file might be needed. For example, Microsoft Azure has an automated way of creating virtual environments and installing the packages from a ",(0,o.jsx)(n.code,{children:"requirements.txt"})," file for Python web apps. In such cases, execute the following command to export all the project dependencies to a ",(0,o.jsx)(n.code,{children:"requirements.txt"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"poetry export -f requirements.txt --output requirements.txt\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This will create a ",(0,o.jsx)(n.code,{children:"requirements.txt"})," file with all the pinned versions of your dependencies, which you can use for other purposes like during deployment."]}),"\n",(0,o.jsx)(n.h2,{id:"6-references",children:"6. References"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://python-poetry.org/docs/",children:"Poetry Documentation"})}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"\nThis single-file code provides a comprehensive guide to Python dependency management using best practices, especially focused on using Poetry for managing dependencies.\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(96540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);