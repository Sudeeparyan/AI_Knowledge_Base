"use strict";(self.webpackChunksudeeparyan_knowledgebase=self.webpackChunksudeeparyan_knowledgebase||[]).push([[6417],{14989:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var t=n(74848),i=n(28453);const s={},a=void 0,o={id:"RAG360/Retrieval/Story",title:"Story",description:"Vector Database Retrieval Journey",source:"@site/docs/RAG360/Retrieval/Story.md",sourceDirName:"RAG360/Retrieval",slug:"/RAG360/Retrieval/Story",permalink:"/docs/RAG360/Retrieval/Story",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"ragSidebar",previous:{title:"PandasLLM",permalink:"/docs/RAG360/Retrieval/Structured/PandasLLM"},next:{title:"Generation",permalink:"/docs/category/generation"}},c={},l=[{value:"Vector Database Retrieval Journey",id:"vector-database-retrieval-journey",level:3},{value:"Prerequisite",id:"prerequisite",level:3},{value:"Binary Search Recap",id:"binary-search-recap",level:3},{value:"Start of Journey",id:"start-of-journey",level:2},{value:"References",id:"references",level:2}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h3,{id:"vector-database-retrieval-journey",children:"Vector Database Retrieval Journey"}),"\n",(0,t.jsx)(r.p,{children:"A vector database, vector store, or vector search engine is a database that can store vectors along with other data items."}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"story",src:n(78678).A+"",width:"962",height:"967"})}),"\n",(0,t.jsx)(r.h3,{id:"prerequisite",children:"Prerequisite"}),"\n",(0,t.jsx)(r.p,{children:"Binary Search"}),"\n",(0,t.jsx)(r.h3,{id:"binary-search-recap",children:"Binary Search Recap"}),"\n",(0,t.jsx)(r.p,{children:"Binary search is a search algorithm used to find the position of a target value within a sorted array. It operates by repeatedly dividing the search interval in half."}),"\n",(0,t.jsx)(r.h2,{id:"start-of-journey",children:"Start of Journey"}),"\n",(0,t.jsx)(r.p,{children:"Binary search is an algorithm."}),"\n",(0,t.jsx)(r.p,{children:"Similarly, vector databases support different algorithms, such as:\nApproximate Nearest Neighbor (ANN)\nK-Nearest Neighbors (KNN) - typically not directly supported by vector databases as a basic algorithm."}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"To do binary search, we need a sorted array. Since we can't do binary search on an unsorted array, in the same way, we store all the vectors in a way suitable for an algorithm. This is called a Vector Index."}),"*"]}),"\n",(0,t.jsxs)(r.p,{children:["There are different vector Indexes ",(0,t.jsx)(r.a,{href:"https://milvus.io/docs/index.md?tab=floating",children:"link"})]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"SPARSE_INVERTED_INDEX"}),"\n",(0,t.jsx)(r.li,{children:"SPARSE_WAND"}),"\n",(0,t.jsx)(r.li,{children:"FLAT"}),"\n",(0,t.jsx)(r.li,{children:"IVF_FLAT"}),"\n",(0,t.jsx)(r.li,{children:"IVF_SQ8"}),"\n",(0,t.jsx)(r.li,{children:"IVF_PQ"}),"\n",(0,t.jsx)(r.li,{children:"GPU_IVF_FLAT"}),"\n",(0,t.jsx)(r.li,{children:"GPU_IVF_PQ"}),"\n",(0,t.jsx)(r.li,{children:"HNSW"}),"\n",(0,t.jsx)(r.li,{children:"DISKANN"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"To do binary search, we compare two elements to check whether they are lesser or greater, and the result is True/False. In the same way, we have different metrics for each algorithm."})}),"\n",(0,t.jsxs)(r.p,{children:["Here are some metrics to check how query vectors and document vectors are close ",(0,t.jsx)(r.a,{href:"https://milvus.io/docs/metric.md?tab=floating",children:"link"})]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Euclidean distance (L2)"}),"\n",(0,t.jsx)(r.li,{children:"Inner product (IP)"}),"\n",(0,t.jsx)(r.li,{children:"Cosine similarity (COSINE)"}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["We can have the array in a python object (memory), or a file on disk and execute the algorithm. This is where the index is categorized based on the type of memory ",(0,t.jsx)(r.a,{href:"https://milvus.io/docs/index.md?tab=floating",children:"link"})]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"In-memory Index,"}),"\n",(0,t.jsx)(r.li,{children:"On-disk Index,"}),"\n",(0,t.jsx)(r.li,{children:"GPU Index"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"To store the index with the vector, document content, metadata, and manage the index, we need some applications. This is where the Vector Database comes in:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Faiss,"}),"\n",(0,t.jsx)(r.li,{children:"Weaviate,"}),"\n",(0,t.jsx)(r.li,{children:"Qdrant,"}),"\n",(0,t.jsx)(r.li,{children:"Milvus"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Consider the element in the array. In our case, each element is a vector."})}),"\n",(0,t.jsxs)(r.p,{children:["Different Vectors ",(0,t.jsx)(r.a,{href:"https://qdrant.tech/articles/late-interaction-models/",children:"link"})]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsx)(r.li,{children:"Sparse Vector,"}),"\n",(0,t.jsx)(r.li,{children:"Dense Vector,"}),"\n",(0,t.jsx)(r.li,{children:"Late Interaction Vector,"}),"\n",(0,t.jsx)(r.li,{children:"Multivectors."}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Note:"})}),"\n",(0,t.jsx)(r.p,{children:"If we consider the size of each value in a vector, it is based on the type of data. If we consider float, there are different float types with varied bit sizes. If the bit size of each is high, then precision is high.\nFloat 16 bit,\nFloat 32 bit\xa0"}),"\n",(0,t.jsx)(r.p,{children:"Finally, we get the results. In the terms of vector similarity search, we get the score of how the query vector and document vector are related."}),"\n",(0,t.jsxs)(r.p,{children:["Consider we do hybrid search with both sparse and dense vectors. Then, we would get two results. To combine the two results and rerank, there are ranking algorithms inbuilt in vector indexes with hybrid search ",(0,t.jsx)(r.a,{href:"https://milvus.io/docs/reranking.md",children:"link"}),"\nReciprocal Rank Fusion (RRF),\nWeighted Ranker"]}),"\n",(0,t.jsx)(r.p,{children:'We also heard of metadata in our retrieval journey. Let\'s consider the metadata of documents having a journey key like "Retrieval Journey" or "Generation Journey".'}),"\n",(0,t.jsxs)(r.p,{children:["Some vector DBs support metadata filtering. For example, ",(0,t.jsx)(r.code,{children:'{"journey": "Retrieval Journey"}'}),". We can apply some conditions for filtering the documents."]}),"\n",(0,t.jsx)(r.p,{children:"Then, the result is used by our application."}),"\n",(0,t.jsx)(r.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(r.admonition,{type:"info",children:[(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://milvus.io/docs",children:"https://milvus.io/docs"})}),(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://qdrant.tech/documentation/concepts/vectors/",children:"https://qdrant.tech/documentation/concepts/vectors/"})}),(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://weaviate.io/developers/weaviate",children:"https://weaviate.io/developers/weaviate"})}),(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://milvus.io/docs/metric.md?tab=floating",children:"https://milvus.io/docs/metric.md?tab=floating"})})]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},78678:(e,r,n)=>{n.d(r,{A:()=>t});const t=n.p+"assets/images/story-2b9d527c2c9dea52862ab4efc4358591.png"},28453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>o});var t=n(96540);const i={},s=t.createContext(i);function a(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);