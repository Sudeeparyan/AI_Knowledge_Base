"use strict";(self.webpackChunksudeeparyan_knowledgebase=self.webpackChunksudeeparyan_knowledgebase||[]).push([[6661],{73181:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var t=n(74848),a=n(28453);n(96540);const s={},o=void 0,i={id:"Azure360/Azure Best Practices/Application Services/Virtual Machine",title:"Virtual Machine",description:"1. Azure Virtual Machines (VMs) provide on-demand, scalable computing",source:"@site/docs/Azure360/Azure Best Practices/Application Services/Virtual Machine.md",sourceDirName:"Azure360/Azure Best Practices/Application Services",slug:"/Azure360/Azure Best Practices/Application Services/Virtual Machine",permalink:"/docs/Azure360/Azure Best Practices/Application Services/Virtual Machine",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"azureSidebar",previous:{title:"Container Registry",permalink:"/docs/Azure360/Azure Best Practices/Application Services/Container Registry"},next:{title:"Application Gateway",permalink:"/docs/Azure360/Azure Best Practices/Application Services/Application Gateway"}},c={},l=[{value:"When to Use Azure Virtual Machine",id:"when-to-use-azure-virtual-machine",level:3},{value:"Scripts",id:"scripts",level:3},{value:"Qdrant Vector Database Setup",id:"qdrant-vector-database-setup",level:4},{value:"Weaviate Vector Database Setup",id:"weaviate-vector-database-setup",level:4},{value:"Learn more about Azure Virtual Network",id:"learn-more-about-azure-virtual-network",level:3}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Azure Virtual Machines (VMs)"})," provide on-demand, scalable computing\r\nresources in the cloud."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"With Azure VMs, you can run a wide variety of operating systems and\r\napplications, offering the flexibility to deploy and scale applications while\r\nonly paying for what you use."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"when-to-use-azure-virtual-machine",children:"When to Use Azure Virtual Machine"}),"\n",(0,t.jsxs)("table",{class:"table-size-for-cloud-services",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Factors"}),(0,t.jsx)("th",{children:"Reason"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("span",{class:"custom-header",children:"Lift and Shift"})}),(0,t.jsx)("td",{children:"Migrate your on-premises workloads to Azure without changing your applications."})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("span",{class:"custom-header",children:"Custom Applications"})}),(0,t.jsx)("td",{children:"Run custom applications or software that require specific configurations or control over the operating system."})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("span",{class:"custom-header",children:"Development and Testing"})}),(0,t.jsx)("td",{children:"Set up isolated VMs for developing and testing applications with various configurations."})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("span",{class:"custom-header",children:"Disaster Recovery"})}),(0,t.jsx)("td",{children:"Use Azure VMs as part of your disaster recovery plan to ensure business continuity."})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("span",{class:"custom-header",children:"Big Data and High-Performance Computing"})}),(0,t.jsx)("td",{children:"Run large-scale computations, data analysis, or batch processing using Azure VMs."})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"scripts",children:"Scripts"}),"\n",(0,t.jsx)(r.h4,{id:"qdrant-vector-database-setup",children:"Qdrant Vector Database Setup"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:'# Step 1: Install Docker\r\necho "Updating APT..."\r\nsudo apt-get update\r\n\r\necho "Installing required packages..."\r\nsudo apt-get install -y ca-certificates curl gnupg lsb-release\r\n\r\necho "Adding Docker\'s official GPG key..."\r\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\r\n\r\necho "Setting up the stable Docker repository..."\r\necho \\\r\n  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\\r\n  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\r\n\r\necho "Updating APT with the new Docker repository..."\r\nsudo apt-get update\r\n\r\necho "Installing Docker CE, CLI, and containerd.io..."\r\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io\r\n\r\n# Step 2: Auto start Docker\r\necho "Enabling Docker to start on boot..."\r\nsudo systemctl enable docker\r\n\r\n# Step 3: Setup Qdrant using Docker Compose\r\necho "Creating a directory for Qdrant and navigating into it..."\r\nsudo mkdir -p ~/qdrant_setup && cd ~/qdrant_setup\r\n\r\necho "Creating docker-compose.yaml..."\r\nsudo tee docker-compose.yaml > /dev/null <<EOF\r\nversion: \'3.4\'\r\nservices:\r\n  qdrant:\r\n    image: qdrant/qdrant:latest\r\n    restart: always\r\n    container_name: qdrant\r\n    ports:\r\n      - 6333:6333\r\n      - 6334:6334\r\n    expose:\r\n      - 6333\r\n      - 6334\r\n      - 6335\r\n    configs:\r\n      - source: qdrant_config\r\n        target: /qdrant/config/production.yaml\r\n    volumes:\r\n      - ./qdrant_data:/qdrant/storage\r\n\r\nconfigs:\r\n  qdrant_config:\r\n    content: |\r\n      log_level: INFO\r\nvolumes:\r\n  qdrant_data:\r\n    external: true\r\nEOF\r\n\r\necho "Creating the \'qdrant_data\' directory..."\r\nsudo mkdir -p qdrant_data\r\n\r\n# Step 4: Enable inbound port\r\necho "Checking UFW status..."\r\nsudo ufw status\r\n\r\necho "Enabling UFW..."\r\nsudo ufw enable\r\n\r\necho "Allowing port 6333 through the firewall..."\r\nsudo ufw allow 6333\r\n\r\necho "Reloading UFW to apply changes..."\r\nsudo ufw reload\r\n\r\necho "Verifying UFW status..."\r\nsudo ufw status\r\n\r\n# Step 5: Run the container\r\necho "Run the container"\r\nsudo docker compose up -d\r\n\r\necho "Setup completed successfully!"\n'})}),"\n",(0,t.jsx)(r.h4,{id:"weaviate-vector-database-setup",children:"Weaviate Vector Database Setup"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:'# Step 1: Install Docker\r\necho "Updating APT..."\r\nsudo apt-get update\r\n\r\necho "Installing required packages..."\r\nsudo apt-get install -y ca-certificates curl gnupg lsb-release\r\n\r\necho "Adding Docker\'s official GPG key..."\r\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\r\n\r\necho "Setting up the stable Docker repository..."\r\necho \\\r\n  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\\r\n  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\r\n\r\necho "Updating APT with the new Docker repository..."\r\nsudo apt-get update\r\n\r\necho "Installing Docker CE, CLI, and containerd.io..."\r\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io\r\n\r\n# Step 2: Auto start Docker\r\necho "Enabling Docker to start on boot..."\r\nsudo systemctl enable docker\r\n\r\n# Step 3: Setup Weaviate using Docker Compose\r\necho "Creating a directory for Weaviate and navigating into it..."\r\nsudo mkdir -p ~/weaviate_setup && cd ~/weaviate_setup\r\n\r\necho "Creating docker-compose.yaml..."\r\nsudo tee docker-compose.yaml > /dev/null <<EOF\r\nversion: \'3.4\'\r\nservices:\r\n  weaviate:\r\n    command:\r\n    - --host\r\n    - 0.0.0.0\r\n    - --port\r\n    - \'8080\'\r\n    - --scheme\r\n    - http\r\n    image: semitechnologies/weaviate:1.23.0\r\n    ports:\r\n    - 8080:8080\r\n    - 50051:50051\r\n    volumes:\r\n    - ./weaviate_data:/var/lib/weaviate\r\n    restart: always\r\n    environment:\r\n      QUERY_DEFAULTS_LIMIT: 25\r\n      AUTHENTICATION_APIKEY_ENABLED: \'true\'\r\n      AUTHENTICATION_APIKEY_ALLOWED_KEYS: \'sonic_secretkey\'\r\n      AUTHENTICATION_APIKEY_USERS: \'sonic\'\r\n      PERSISTENCE_DATA_PATH: \'/var/lib/weaviate\'\r\n      DEFAULT_VECTORIZER_MODULE: \'none\'\r\n      ENABLE_MODULES: \'text2vec-cohere,text2vec-huggingface,text2vec-palm,text2vec-openai,generative-openai,generative-cohere,generative-palm,ref2vec-centroid,reranker-cohere,qna-openai\'\r\n      CLUSTER_HOSTNAME: \'node1\'\r\nvolumes:\r\n  weaviate_data:\r\n    external: true\r\nEOF\r\n\r\necho "Creating the \'weaviate_data\' directory..."\r\nsudo mkdir -p weaviate_data\r\n\r\n# Step 4: Enable inbound port\r\necho "Checking UFW status..."\r\nsudo ufw status\r\n\r\necho "Enabling UFW..."\r\nsudo ufw enable\r\n\r\necho "Allowing port 8080 through the firewall..."\r\nsudo ufw allow 8080\r\n\r\necho "Reloading UFW to apply changes..."\r\nsudo ufw reload\r\n\r\necho "Verifying UFW status..."\r\nsudo ufw status\r\n\r\n# Step 5: Run the container\r\necho "Run the container"\r\nsudo docker compose up -d\r\n\r\necho "Setup completed successfully!"\n'})}),"\n",(0,t.jsx)(r.h3,{id:"learn-more-about-azure-virtual-network",children:"Learn more about Azure Virtual Network"}),"\n",(0,t.jsx)(r.admonition,{type:"info",children:(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Learn more about\r\n",(0,t.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-machines/",children:"VM Best Practices"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Learn more about\r\n",(0,t.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview",children:"Scaling"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Learn more about\r\n",(0,t.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-machines/availability-set-overview",children:"Availability Sets"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Learn more about\r\n",(0,t.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-machines/windows/tutorial-custom-images",children:"Custom VM Images"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Learn more about\r\n",(0,t.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-machines/spot-vms",children:"Azure Spot VMs"})]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Learn more about\r\n",(0,t.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-machines/disk-encryption",children:"Azure Virtual Machines Security"})]}),"\n"]}),"\n"]})})]})}function u(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>i});var t=n(96540);const a={},s=t.createContext(a);function o(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);